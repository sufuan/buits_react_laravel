import{r as s,J as W,x as f,U as z,j as e,Q as $}from"./app-DUZu3E1w.js";import{A as B}from"./AdminAuthenticatedLayout-BRt7Rd6v.js";import"./badge-DucI-p7Z.js";import"./index-aTSVDLci.js";import"./clsx-B-dksMZM.js";import"./index-B4ItBmEV.js";import"./createLucideIcon-BCmpsMiG.js";import"./index-CxZAYfhn.js";import"./index-BU1OzddZ.js";import"./index-Bu3pOA3X.js";import"./breadcrumb-BSFPfU_M.js";import"./button-B6pxJfLF.js";import"./input-IbLGAQhR.js";import"./index-BBEDcjP_.js";import"./index-HuLqmqlH.js";import"./chevron-right--U4Ytxrr.js";import"./avatar-EBHsJ_IG.js";import"./calendar-ChMV6Tbd.js";import"./award-BiAXPDhB.js";import"./index-DuiMM8X1.js";function U({title:n,titleId:r,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const w=s.forwardRef(U);function I({title:n,titleId:r,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const j=s.forwardRef(I);function P({title:n,titleId:r,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const E=s.forwardRef(P);function ve({auth:n,currentMembers:r,currentCommitteeNumber:a,designations:o,availableUsers:H,totalCurrentMembers:d,isPublished:C}){const[Y,q]=s.useState(!1),[M,g]=s.useState(!1),[Q,Z]=s.useState(null),[v,N]=s.useState(r),[l,_]=s.useState("member_order"),[m,T]=s.useState("asc"),{flash:i={}}=W().props,{post:S}=f(),L=()=>{confirm("Are you sure you want to publish the current committee? This will make it visible to the public.")&&S(route("admin.committee.publish"),{preserveScroll:!0,onSuccess:()=>{}})},{data:G,setData:J,patch:V,processing:K,errors:X,reset:ee}=f({user_id:"",designation_id:"",member_order:""}),{data:x,setData:y,post:R,processing:k,errors:u,reset:D}=f({confirmation:"",new_committee_number:""}),b=t=>{const c=l===t&&m==="asc"?"desc":"asc";_(t),T(c);const O=[...v].sort((p,h)=>t==="member_order"?c==="asc"?p[t]-h[t]:h[t]-p[t]:c==="asc"?p[t].localeCompare(h[t]):h[t].localeCompare(p[t]));N(O)},A=t=>{t.preventDefault(),x.confirmation==="CONFIRM"&&R(route("admin.committee.end-tenure"),{onSuccess:()=>{D(),g(!1)}})},F=()=>{const t=new Date().getFullYear(),c=t+1;return`${t}-${c}`};return z.useEffect(()=>{N(r)},[r]),e.jsxs(B,{user:n.user,children:[e.jsx($,{title:"Current Committee Management"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Current Committee"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[a?`Committee ${a}`:"Committee 1","• ",d," executive members"]}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"✓ All executive members with designations are automatically included"})]}),e.jsx("div",{className:"flex space-x-3",children:d>0&&(C?e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-6 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"End Tenure"]}):e.jsxs("button",{onClick:L,className:"inline-flex items-center px-6 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Publish Committee"]}))})]}),(i==null?void 0:i.success)&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:i.success}),(i==null?void 0:i.error)&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i.error}),d===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No current committee members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a committee member."})]}):e.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("member_order"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Order"}),l==="member_order"&&(m==="asc"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("user_name"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Executive Member"}),l==="user_name"&&(m==="asc"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("designation_name"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Designation"}),l==="designation_name"&&(m==="asc"?e.jsx(j,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map((t,c)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.member_order})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.user_image?e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:`/storage/${t.user_image}`,alt:t.user_name}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.user_name.charAt(0)})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.user_name}),e.jsx("div",{className:"text-sm text-green-600",children:"Auto-assigned Executive Member"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:t.designation_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.user_email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Active"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Managed via User Roles)"})]})})]},t.id))})]})})]})})})}),M&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(E,{className:"w-8 h-8 text-red-600 mr-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"End Committee Tenure"})]}),e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will archive all current executive committee members (",d," members) and remove them from the current committee. They will be moved to previous committee records. To add new members to the committee, approve executives with designations in User Role Management. This action cannot be undone."]})}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"New Committee Number"}),e.jsx("input",{type:"text",value:x.new_committee_number,onChange:t=>y("new_committee_number",t.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline",placeholder:F(),required:!0}),u.new_committee_number&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.new_committee_number})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:'Type "CONFIRM" to proceed'}),e.jsx("input",{type:"text",value:x.confirmation,onChange:t=>y("confirmation",t.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline",placeholder:"CONFIRM",required:!0}),u.confirmation&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.confirmation})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||x.confirmation!=="CONFIRM",className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:k?"Processing...":"End Tenure"})]})]})]})})]})}export{ve as default};
