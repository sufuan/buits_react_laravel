import{r as l,j as e,Q as _,S as P}from"./app-Dy3Ft7RM.js";import{A as $}from"./AdminAuthenticatedLayout-CHbNuyxX.js";import"./badge-G3EGJxmf.js";import"./index-CL1IFjib.js";import"./clsx-B-dksMZM.js";import"./index-C4xZ7dmg.js";import"./createLucideIcon-CLRWZmFz.js";import"./index-DqZTSaU6.js";import"./index-CyJJblEx.js";import"./index-BnDW1wfs.js";import"./breadcrumb-9x5oQOfj.js";import"./button-DwEHU71J.js";import"./input-CDPceP29.js";import"./index-CzLnmU25.js";import"./index-DfUjHiyo.js";import"./chevron-right-DjMKnQCw.js";import"./avatar-C0NFYYNv.js";import"./calendar-BvxQXd6G.js";import"./award-D8HftvAd.js";import"./index-BJv5NP9c.js";function ee({applications:d,designations:v,pendingUsersCount:N=0,pendingVolunteerApplications:b=0,pendingExecutiveApplications:w=0}){const[g,j]=l.useState(!1),[a,c]=l.useState([]),[n,o]=l.useState("all"),[A,h]=l.useState(!1),[m,f]=l.useState(null),[p,u]=l.useState(""),y=(t,s,r="",i=null)=>{P.patch(route("admin.applications.executive.update",t),{status:s,admin_comment:r,designation_id:i},{preserveScroll:!0,onStart:()=>j(!0),onFinish:()=>j(!1)})},k=t=>{f(t),u(t.designation_id||""),h(!0)},S=()=>{if(!p){alert("Please select a designation for this executive position.");return}const t=prompt("Approval comment (optional):")||"";y(m.id,"approved",t,p),h(!1),f(null),u("")},C=t=>{if(a.length===0)return;const s=prompt("Rejection reason (optional):");s!==null&&(a.forEach(r=>{y(r,t,s)}),c([]))},D=t=>{if(t.target.checked){const s=x.filter(r=>r.status==="pending").map(r=>r.id);c(s)}else c([])},E=(t,s)=>{c(s?[...a,t]:a.filter(r=>r!==t))},R=t=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",x=d.filter(t=>n==="all"?!0:t.status===n);return e.jsxs($,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Executive Application Management"}),pendingUsersCount:N,pendingVolunteerApplications:b,pendingExecutiveApplications:w,children:[e.jsx(_,{title:"Executive Applications"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Executive Applications"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-xs rounded-full ${n==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:["All (",d.length,")"]}),e.jsxs("button",{onClick:()=>o("pending"),className:`px-3 py-1 text-xs rounded-full ${n==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:["Pending (",d.filter(t=>t.status==="pending").length,")"]}),e.jsxs("button",{onClick:()=>o("approved"),className:`px-3 py-1 text-xs rounded-full ${n==="approved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:["Approved (",d.filter(t=>t.status==="approved").length,")"]}),e.jsxs("button",{onClick:()=>o("rejected"),className:`px-3 py-1 text-xs rounded-full ${n==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:["Rejected (",d.filter(t=>t.status==="rejected").length,")"]})]})]}),a.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[a.length," selected"]}),e.jsx("button",{onClick:()=>C("rejected"),disabled:g,className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"Bulk Reject"})]})]}),x.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No executive applications found for the selected filter."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",onChange:D,className:"rounded border-gray-300",checked:a.length===x.filter(t=>t.status==="pending").length&&x.filter(t=>t.status==="pending").length>0})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied On"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(t=>{var s,r;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.status==="pending"&&e.jsx("input",{type:"checkbox",checked:a.includes(t.id),onChange:i=>E(t.id,i.target.checked),className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.user.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.user.email}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Current: ",t.user.usertype]})]})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((s=t.designation)==null?void 0:s.name)||"N/A"}),((r=t.designation)==null?void 0:r.level)&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Level ",t.designation.level]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.user.department||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs",children:e.jsx("div",{className:"truncate",title:t.reason,children:t.reason||"No reason provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),t.admin_comment&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",title:t.admin_comment,children:["Comment: ",t.admin_comment.substring(0,30),"..."]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[t.status==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(t),disabled:g,className:"text-green-600 hover:text-green-900 disabled:opacity-50",children:"Approve"}),e.jsx("button",{onClick:()=>{const i=prompt("Rejection reason (optional):");i!==null&&y(t.id,"rejected",i)},disabled:g,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Reject"})]}),t.status!=="pending"&&e.jsx("span",{className:"text-gray-400",children:t.status==="approved"?"Approved":"Rejected"})]})]},t.id)})})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Approve Executive Application"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Approving ",e.jsx("strong",{children:m==null?void 0:m.user.name})," for executive position. Please select their designation:"]}),e.jsxs("select",{value:p,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Designation..."}),v.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (Level ",t.level,")"]},t.id))]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!p,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:"Approve & Assign"})]})]})})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-600 bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"Executive Application Process:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-purple-800",children:[e.jsx("li",{children:'Approved executive applications will change user role from "volunteer" to "executive"'}),e.jsx("li",{children:"Each approved executive must be assigned a specific designation/position"}),e.jsx("li",{children:"Designations determine hierarchy and responsibilities within the organization"}),e.jsx("li",{children:"All role changes are logged with admin information and timestamps"})]})]})]})})})})]})}export{ee as default};
