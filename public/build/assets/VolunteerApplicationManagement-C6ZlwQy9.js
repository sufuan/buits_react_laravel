import{r as m,j as e,Q as w,S as k}from"./app-G7oNGmaq.js";import{A}from"./AdminAuthenticatedLayout-CO0pvYAL.js";import"./badge-DxvZOX8c.js";import"./index-DpxInQ5_.js";import"./clsx-B-dksMZM.js";import"./index-Bc7KOo-l.js";import"./createLucideIcon-Di0d-h6S.js";import"./index-wCRObIIM.js";import"./index-NCNbKjck.js";import"./index-D64KeL0B.js";import"./breadcrumb-CdOa6RTz.js";import"./button-Bx0bN2-W.js";import"./input-Dia4Om0r.js";import"./index-CXnmGBAh.js";import"./index-fkt4kIjX.js";import"./chevron-right-CUL_vqYI.js";import"./avatar-ly8jZUFO.js";import"./calendar-D7dcPMXA.js";import"./award-9wYZdOhz.js";import"./index-BmSN62-o.js";function J({applications:i,pendingUsersCount:g=0,pendingVolunteerApplications:f=0,pendingExecutiveApplications:j=0}){const[c,p]=m.useState(!1),[r,l]=m.useState([]),[n,o]=m.useState("all"),[S,u]=m.useState(!1),x=(t,s,a="")=>{k.patch(route("admin.applications.volunteer.update",t),{status:s,admin_notes:a},{preserveScroll:!0,onStart:()=>p(!0),onFinish:()=>p(!1),onSuccess:()=>{console.log("Application status updated successfully")},onError:v=>{console.error("Error updating application:",v)}})},h=t=>{if(r.length!==0){if(t==="approved")confirm(`Approve ${r.length} volunteer applications? This will change their role to volunteer.`)&&(r.forEach(s=>{x(s,t,"")}),l([]),u(!1));else if(t==="rejected"){const s=prompt("Rejection reason (required for all):");s&&s.trim()?(r.forEach(a=>{x(a,t,s.trim())}),l([]),u(!1)):s!==null&&alert("Rejection reason is required")}}},y=t=>{if(t.target.checked){const s=d.filter(a=>a.status==="pending").map(a=>a.id);l(s)}else l([])},b=(t,s)=>{l(s?[...r,t]:r.filter(a=>a!==t))},N=t=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",d=i.filter(t=>n==="all"?!0:t.status===n);return e.jsxs(A,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Volunteer Application Management"}),pendingUsersCount:g,pendingVolunteerApplications:f,pendingExecutiveApplications:j,children:[e.jsx(w,{title:"Volunteer Applications"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Volunteer Applications"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-xs rounded-full ${n==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:["All (",i.length,")"]}),e.jsxs("button",{onClick:()=>o("pending"),className:`px-3 py-1 text-xs rounded-full ${n==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:["Pending (",i.filter(t=>t.status==="pending").length,")"]}),e.jsxs("button",{onClick:()=>o("approved"),className:`px-3 py-1 text-xs rounded-full ${n==="approved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:["Approved (",i.filter(t=>t.status==="approved").length,")"]}),e.jsxs("button",{onClick:()=>o("rejected"),className:`px-3 py-1 text-xs rounded-full ${n==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:["Rejected (",i.filter(t=>t.status==="rejected").length,")"]})]})]}),r.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," selected"]}),e.jsx("button",{onClick:()=>h("approved"),disabled:c,className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Bulk Approve"}),e.jsx("button",{onClick:()=>h("rejected"),disabled:c,className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"Bulk Reject"})]})]}),d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No volunteer applications found for the selected filter."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",onChange:y,className:"rounded border-gray-300",checked:r.length===d.filter(t=>t.status==="pending").length&&d.filter(t=>t.status==="pending").length>0})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Application Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.status==="pending"&&e.jsx("input",{type:"checkbox",checked:r.includes(t.id),onChange:s=>b(t.id,s.target.checked),className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.user.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:t.user.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap capitalize text-sm text-gray-500",children:t.user.usertype}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs",children:e.jsx("div",{className:"truncate",title:t.reason,children:t.reason||"No reason provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),t.admin_comment&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",title:t.admin_comment,children:["Comment: ",t.admin_comment.substring(0,30),"..."]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[t.status==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{confirm("Approve this volunteer application? This will change the user's role to volunteer.")&&x(t.id,"approved","")},disabled:c,className:"text-green-600 hover:text-green-900 disabled:opacity-50",children:"Approve"}),e.jsx("button",{onClick:()=>{const s=prompt("Rejection reason (required):");s&&s.trim()?x(t.id,"rejected",s.trim()):s!==null&&alert("Rejection reason is required")},disabled:c,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Reject"})]}),t.status!=="pending"&&e.jsx("span",{className:"text-gray-400",children:t.status==="approved"?"Approved":"Rejected"})]})]},t.id))})]})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-600 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Application Process:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[e.jsx("li",{children:'Approved volunteer applications will automatically change user role from "member" to "volunteer"'}),e.jsx("li",{children:"Use bulk actions to approve/reject multiple applications at once"}),e.jsx("li",{children:"All actions are logged with admin information and timestamps"}),e.jsx("li",{children:"Rejected applications can include admin comments for feedback"})]})]})]})})})})]})}export{J as default};
