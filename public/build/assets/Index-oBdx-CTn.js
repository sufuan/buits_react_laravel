import{r as T,j as u,Q as de,a as G}from"./app-C1-BhYwW.js";import{A as ge}from"./AdminAuthenticatedLayout-n8nHtuKB.js";import{c as ue,d as S,E as pe,p as me,e as ve,f as fe,g as Ee,h as Se,j as b,I as A,k as _,l as De,m as W,n as q,t as we,o as U,q as ee,r as y,s as te,u as ie,v as P,w as N,x as ye,y as z,z as se,A as Y,B as be,C as Ce,D as xe,G as ne,H as Te,J as Me,K as Re,L as je,M as Ie,N as Pe,O as Ne,P as re,Q as F,W as Le,R as Ae,S as He,T as Xe,U as Ye,V as Ve,X as Ue,F as Oe,i as ke,a as _e,b as We}from"./index-BrChskw7.js";import{B as qe}from"./button-B7iXgecm.js";import{C as B,a as $,b as Q,d as Z,c as Fe}from"./card-Cq9wpWkT.js";import Ge from"./EventModal-BQDTkvkH.js";import{C as ze,E as Be}from"./EventDetailsModal-C-bLru0G.js";import{t as V}from"./index-BfJCq-8N.js";import{C as K}from"./calendar-PcuVg9g_.js";import{C as $e}from"./clock-XEjPFJ3Q.js";import{c as Qe}from"./createLucideIcon-D19Eww6g.js";import{S as Ze}from"./sparkles-BYc_cHnS.js";import{P as Ke}from"./plus-Dt1WVr8s.js";import"./badge-BIDVpDsY.js";import"./index-CHYIVxX6.js";import"./clsx-B-dksMZM.js";import"./index-CjdBt_RI.js";import"./index-D_Gva4nH.js";import"./index-alOraRYz.js";import"./index-AUv1zfk2.js";import"./breadcrumb-CoyL08EQ.js";import"./input-Ce-XynMX.js";import"./index-BRzXs5-t.js";import"./index-ChosiiE7.js";import"./chevron-right-Dobkmf49.js";import"./avatar-B35DdgwT.js";import"./award-sqH3_Nw-.js";import"./dialog-DkuFctmz.js";import"./label-BxCSsw1S.js";import"./textarea-BIGVUnxY.js";import"./select-CQQDT7Wa.js";import"./index-BdQq_4o_.js";import"./index-qk1iyDqg.js";import"./switch-CjIvGgiA.js";import"./map-pin-BVaIt89G.js";import"./save-BpgVugEn.js";import"./alert-dialog-2Hyjr1J7.js";import"./format-zWY_uF1i.js";import"./trash-2-9Gx35m9l.js";import"./circle-alert-DxZO57YJ.js";import"./square-pen-fpqEKr98.js";import"./circle-x-B56_BeeA.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],et=Qe("trending-up",Je);F.touchMouseIgnoreWait=500;let O=0,L=0,k=!1;class le{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&tt(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let s=t.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,it()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:i-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new se,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),st()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),nt()}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return t&&(!this.handleSelector||b(i,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){k=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?b(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return O||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(k=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,s=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:s}}createEventFromTouch(e,t){let i=e.touches,s,l,n=0,r=0;return i&&i.length?(s=i[0].pageX,l=i[0].pageY):(s=e.pageX,l=e.pageY),t?(this.origPageX=s,this.origPageY=l):(n=s-this.origPageX,r=l-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:l,deltaX:n,deltaY:r}}}function tt(h){return h.button===0&&!h.ctrlKey}function it(){O+=1,setTimeout(()=>{O-=1},F.touchMouseIgnoreWait)}function st(){L+=1,L===1&&window.addEventListener("touchmove",oe,{passive:!1})}function nt(){L-=1,L||window.removeEventListener("touchmove",oe,{passive:!1})}function oe(h){k&&h.preventDefault()}class rt{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",Y(i,{left:s.left,top:s.top}),be(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(Ce(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Y(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),Y(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class ae extends Xe{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class he extends ae{constructor(e,t){super(new Ae(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return He(this.scrollController.el)}}class lt extends ae{constructor(e){super(new Le,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const J=typeof performance=="function"?performance.now:Date.now;class ot{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=J();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,s=t-window.scrollY,l=this.pointerScreenY===null?0:s-this.pointerScreenY,n=this.pointerScreenX===null?0:i-this.pointerScreenX;l<0?this.everMovedUp=!0:l>0&&(this.everMovedDown=!0),n<0?this.everMovedLeft=!0:n>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(J()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:s}=this,l=s-e.distance,n=l*l/(s*s)*this.maxVelocity*t,r=1;switch(e.name){case"left":r=-1;case"right":i.setScrollLeft(i.getScrollLeft()+n*r);break;case"top":r=-1;case"bottom":i.setScrollTop(i.getScrollTop()+n*r);break}}computeBestEdge(e,t){let{edgeThreshold:i}=this,s=null,l=this.scrollCaches||[];for(let n of l){let r=n.clientRect,o=e-r.left,a=r.right-e,d=t-r.top,c=r.bottom-t;o>=0&&a>=0&&d>=0&&c>=0&&(d<=i&&this.everMovedUp&&n.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:n,name:"top",distance:d}),c<=i&&this.everMovedDown&&n.canScrollDown()&&(!s||s.distance>c)&&(s={scrollCache:n,name:"bottom",distance:c}),o<=i&&this.everMovedLeft&&n.canScrollLeft()&&(!s||s.distance>o)&&(s={scrollCache:n,name:"left",distance:o}),a<=i&&this.everMovedRight&&n.canScrollRight()&&(!s||s.distance>a)&&(s={scrollCache:n,name:"right",distance:a}))}return s}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new lt(!1):new he(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)typeof i=="object"?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}}class j extends pe{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,me(document.body),ve(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let l=this.minDistance,n,{deltaX:r,deltaY:o}=s;n=r*r+o*o,n>=l*l&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,fe(document.body),Ee(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new le(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new rt,this.autoScroller=new ot}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class at{constructor(e){this.el=e,this.origRect=ne(e),this.scrollCaches=Ye(e).map(t=>new he(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let s of this.scrollCaches)if(!ht(s.getEventTarget())&&!Ve(i,s.clientRect))return!1;return!0}}function ht(h){let e=h.tagName;return e==="HTML"||e==="BODY"}class H{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):s.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new se}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},i=t,s=e.subjectEl,l;s instanceof HTMLElement&&(l=ne(s),i=Te(i,l));let n=this.initialHit=this.queryHitForOffset(i.left,i.top);if(n){if(this.useSubjectCenter&&l){let r=Me(l,n.rect);r&&(i=Re(r))}this.coordAdjust=je(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!X(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Ie(this.droppableStore,e=>(e.component.prepareHits(),new at(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:s}=this,l=null;for(let n in i){let r=i[n].component,o=s[n];if(o&&o.isWithinClipping(e,t)){let a=o.computeLeft(),d=o.computeTop(),c=e-a,g=t-d,{origRect:m}=o,f=m.right-m.left,p=m.bottom-m.top;if(c>=0&&c<f&&g>=0&&g<p){let v=r.queryHit(c,g,f,p);v&&Pe(v.dateProfile.activeRange,v.dateSpan.range)&&(this.disablePointCheck||o.el.contains(o.el.getRootNode().elementFromPoint(c+a-window.scrollX,g+d-window.scrollY)))&&(!l||v.layer>l.layer)&&(v.componentId=n,v.context=r.context,v.rect.left+=a,v.rect.right+=a,v.rect.top+=d,v.rect.bottom+=d,l=v)}}}return l}}function X(h,e){return!h&&!e?!0:!!h!=!!e?!1:xe(h.dateSpan,e.dateSpan)}function ce(h,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(h,e));return Object.assign(t,ct(h,e.dateEnv)),t}function ct(h,e){return{date:e.toDate(h.range.start),dateStr:e.formatIso(h.range.start,{omitTime:h.allDay}),allDay:h.allDay}}class dt extends A{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:s}=this,l=i.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(l))},this.handleDragEnd=i=>{let{component:s}=this,{pointer:l}=this.dragging;if(!l.wasTouchScroll){let{initialHit:n,finalHit:r}=this.hitDragging;if(n&&r&&X(n,r)){let{context:o}=s,a=Object.assign(Object.assign({},ce(n.dateSpan,o)),{dayEl:n.dayEl,jsEvent:i.origEvent,view:o.viewApi||o.calendarApi.view});o.emitter.trigger("dateClick",a)}}},this.dragging=new j(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new H(this.dragging,_(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class gt extends A{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=n=>{let{component:r,dragging:o}=this,{options:a}=r.context,d=a.selectable&&r.isValidDateDownEl(n.origEvent.target);o.setIgnoreMove(!d),o.delay=n.isTouch?ut(r):null},this.handleDragStart=n=>{this.component.context.calendarApi.unselect(n)},this.handleHitUpdate=(n,r)=>{let{context:o}=this.component,a=null,d=!1;if(n){let c=this.hitDragging.initialHit;n.componentId===c.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(c,n)||(a=pt(c,n,o.pluginHooks.dateSelectionTransformers)),(!a||!De(a,n.dateProfile,o))&&(d=!0,a=null)}a?o.dispatch({type:"SELECT_DATES",selection:a}):r||o.dispatch({type:"UNSELECT_DATES"}),d?q():W(),r||(this.dragSelection=a)},this.handlePointerUp=n=>{this.dragSelection&&(we(this.dragSelection,n,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,s=this.dragging=new j(e.el);s.touchScrollAllowed=!1,s.minDistance=i.selectMinDistance||0,s.autoScroller.isEnabled=i.dragScroll;let l=this.hitDragging=new H(this.dragging,_(e));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function ut(h){let{options:e}=h.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function pt(h,e,t){let i=h.dateSpan,s=e.dateSpan,l=[i.range.start,i.range.end,s.range.start,s.range.end];l.sort(Ue);let n={};for(let r of t){let o=r(h,e);if(o===!1)return null;o&&Object.assign(n,o)}return n.range={start:l[0],end:l[3]},n.allDay=i.allDay,n}class I extends A{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=n=>{let r=n.origEvent.target,{component:o,dragging:a}=this,{mirror:d}=a,{options:c}=o.context,g=o.context;this.subjectEl=n.subjectEl;let m=this.subjectSeg=U(n.subjectEl),p=(this.eventRange=m.eventRange).instance.instanceId;this.relevantEvents=ee(g.getCurrentData().eventStore,p),a.minDistance=n.isTouch?0:c.eventDragMinDistance,a.delay=n.isTouch&&p!==o.props.eventSelection?vt(o):null,c.fixedMirrorParent?d.parentNode=c.fixedMirrorParent:d.parentNode=b(r,".fc"),d.revertDuration=c.dragRevertDuration;let v=o.isValidSegDownEl(r)&&!b(r,".fc-event-resizer");a.setIgnoreMove(!v),this.isDragging=v&&n.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=n=>{let r=this.component.context,o=this.eventRange,a=o.instance.instanceId;n.isTouch?a!==this.component.props.eventSelection&&r.dispatch({type:"SELECT_EVENT",eventInstanceId:a}):r.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(r.calendarApi.unselect(n),r.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new y(r,o.def,o.instance),jsEvent:n.origEvent,view:r.viewApi}))},this.handleHitUpdate=(n,r)=>{if(!this.isDragging)return;let o=this.relevantEvents,a=this.hitDragging.initialHit,d=this.component.context,c=null,g=null,m=null,f=!1,p={affectedEvents:o,mutatedEvents:P(),isEvent:!0};if(n){c=n.context;let v=c.options;d===c||v.editable&&v.droppable?(g=mt(a,n,this.eventRange.instance.range.start,c.getCurrentData().pluginHooks.eventDragMutationMassagers),g&&(m=te(o,c.getCurrentData().eventUiBases,g,c),p.mutatedEvents=m,ie(p,n.dateProfile,c)||(f=!0,g=null,m=null,p.mutatedEvents=P()))):c=null}this.displayDrag(c,p),f?q():W(),r||(d===c&&X(a,n)&&(g=null),this.dragging.setMirrorNeedsRevert(!g),this.dragging.setMirrorIsVisible(!n||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=c,this.validMutation=g,this.mutatedRelevantEvents=m)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=n=>{if(this.isDragging){let r=this.component.context,o=r.viewApi,{receivingContext:a,validMutation:d}=this,c=this.eventRange.def,g=this.eventRange.instance,m=new y(r,c,g),f=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:v}=this.hitDragging;if(this.clearDrag(),r.emitter.trigger("eventDragStop",{el:this.subjectEl,event:m,jsEvent:n.origEvent,view:o}),d){if(a===r){let C=new y(r,p.defs[c.defId],g?p.instances[g.instanceId]:null);r.dispatch({type:"MERGE_EVENTS",eventStore:p});let x={oldEvent:m,event:C,relatedEvents:N(p,r,g),revert(){r.dispatch({type:"MERGE_EVENTS",eventStore:f})}},D={};for(let M of r.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(D,M(d,r));r.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},x),D),{el:n.subjectEl,delta:d.datesDelta,jsEvent:n.origEvent,view:o})),r.emitter.trigger("eventChange",x)}else if(a){let C={event:m,relatedEvents:N(f,r,g),revert(){r.dispatch({type:"MERGE_EVENTS",eventStore:f})}};r.emitter.trigger("eventLeave",Object.assign(Object.assign({},C),{draggedEl:n.subjectEl,view:o})),r.dispatch({type:"REMOVE_EVENTS",eventStore:f}),r.emitter.trigger("eventRemove",C);let x=p.defs[c.defId],D=p.instances[g.instanceId],M=new y(a,x,D);a.dispatch({type:"MERGE_EVENTS",eventStore:p});let E={event:M,relatedEvents:N(p,a,D),revert(){a.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};a.emitter.trigger("eventAdd",E),n.isTouch&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:g.instanceId}),a.emitter.trigger("drop",Object.assign(Object.assign({},ce(v.dateSpan,a)),{draggedEl:n.subjectEl,jsEvent:n.origEvent,view:v.context.viewApi})),a.emitter.trigger("eventReceive",Object.assign(Object.assign({},E),{draggedEl:n.subjectEl,view:v.context.viewApi}))}}else r.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:i}=t.context,s=this.dragging=new j(e.el);s.pointer.selector=I.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=i.dragScroll;let l=this.hitDragging=new H(this.dragging,ye);l.useSubjectCenter=e.useEventCenter,l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let i=this.component.context,s=this.receivingContext;s&&s!==e&&(s===i?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:P(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}I.SELECTOR=".fc-event-draggable, .fc-event-resizable";function mt(h,e,t,i){let s=h.dateSpan,l=e.dateSpan,n=s.range.start,r=l.range.start,o={};s.allDay!==l.allDay&&(o.allDay=l.allDay,o.hasEnd=e.context.options.allDayMaintainDuration,l.allDay?n=Ne(t):n=t);let a=re(n,r,h.context.dateEnv,h.componentId===e.componentId?h.largeUnit:null);a.milliseconds&&(o.allDay=!1);let d={datesDelta:a,standardProps:o};for(let c of i)c(d,h,e);return d}function vt(h){let{options:e}=h.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class ft extends A{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let{component:n}=this,r=this.querySegEl(l),o=U(r),a=this.eventRange=o.eventRange;this.dragging.minDistance=n.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(l.origEvent.target)||l.isTouch&&this.component.props.eventSelection!==a.instance.instanceId)},this.handleDragStart=l=>{let{context:n}=this.component,r=this.eventRange;this.relevantEvents=ee(n.getCurrentData().eventStore,this.eventRange.instance.instanceId);let o=this.querySegEl(l);this.draggingSegEl=o,this.draggingSeg=U(o),n.calendarApi.unselect(),n.emitter.trigger("eventResizeStart",{el:o,event:new y(n,r.def,r.instance),jsEvent:l.origEvent,view:n.viewApi})},this.handleHitUpdate=(l,n,r)=>{let{context:o}=this.component,a=this.relevantEvents,d=this.hitDragging.initialHit,c=this.eventRange.instance,g=null,m=null,f=!1,p={affectedEvents:a,mutatedEvents:P(),isEvent:!0};l&&(l.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,l)||(g=Et(d,l,r.subjectEl.classList.contains("fc-event-resizer-start"),c.range))),g&&(m=te(a,o.getCurrentData().eventUiBases,g,o),p.mutatedEvents=m,ie(p,l.dateProfile,o)||(f=!0,g=null,m=null,p.mutatedEvents=null)),m?o.dispatch({type:"SET_EVENT_RESIZE",state:p}):o.dispatch({type:"UNSET_EVENT_RESIZE"}),f?q():W(),n||(g&&X(d,l)&&(g=null),this.validMutation=g,this.mutatedRelevantEvents=m)},this.handleDragEnd=l=>{let{context:n}=this.component,r=this.eventRange.def,o=this.eventRange.instance,a=new y(n,r,o),d=this.relevantEvents,c=this.mutatedRelevantEvents;if(n.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:a,jsEvent:l.origEvent,view:n.viewApi}),this.validMutation){let g=new y(n,c.defs[r.defId],o?c.instances[o.instanceId]:null);n.dispatch({type:"MERGE_EVENTS",eventStore:c});let m={oldEvent:a,event:g,relatedEvents:N(c,n,o),revert(){n.dispatch({type:"MERGE_EVENTS",eventStore:d})}};n.emitter.trigger("eventResize",Object.assign(Object.assign({},m),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||z(0),endDelta:this.validMutation.endDelta||z(0),jsEvent:l.origEvent,view:n.viewApi})),n.emitter.trigger("eventChange",m)}else n.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new j(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let s=this.hitDragging=new H(this.dragging,_(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return b(e.subjectEl,".fc-event")}}function Et(h,e,t,i){let s=h.context.dateEnv,l=h.dateSpan.range.start,n=e.dateSpan.range.start,r=re(l,n,s,h.largeUnit);if(t){if(s.add(i.start,r)<i.end)return{startDelta:r}}else if(s.add(i.end,r)>i.start)return{endDelta:r};return null}class St{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let s=this.context.options.unselectCancel,l=Se(i.origEvent);this.matchesCancel=!!b(l,s),this.matchesEvent=!!b(l,I.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:s}=this,{documentPointer:l}=this,n=s.getCurrentData();if(!l.wasTouchScroll){if(n.dateSelection&&!this.isRecentPointerDateSelect){let r=s.options.unselectAuto;r&&(!r||!this.matchesCancel)&&s.calendarApi.unselect(i)}n.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new le(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const Dt={fixedMirrorParent:S},wt={dateClick:S,eventDragStart:S,eventDragStop:S,eventDrop:S,eventResizeStart:S,eventResizeStop:S,eventResize:S,drop:S,eventReceive:S,eventLeave:S};F.dataAttrPrefix="";var yt=ue({name:"@fullcalendar/interaction",componentInteractions:[dt,gt,I,ft],calendarInteractions:[St],elementDraggingImpl:j,optionRefiners:Dt,listenerRefiners:wt});function di({events:h,upcomingEventsCount:e,ongoingEventsCount:t,totalEventsCount:i,completedEventsCount:s}){const[l,n]=T.useState(!1),[r,o]=T.useState(!1),[a,d]=T.useState(null),[c,g]=T.useState(null),[m,f]=T.useState(!1),p=T.useRef(null),v=E=>{g(E.dateStr),d(null),f(!1),n(!0)},C=E=>{const w=E.event.id;G.get(route("admin.events.show",w)).then(R=>{d(R.data.event),o(!0)}).catch(R=>{V.error("Failed to load event details")})},x=E=>{var R;const w=E.event;G.patch(route("admin.events.update-dates",w.id),{start_date:w.start.toISOString(),end_date:(R=w.end)==null?void 0:R.toISOString()}).then(()=>{V.success("Event rescheduled successfully!")}).catch(()=>{V.error("Failed to reschedule event"),E.revert()})},D=E=>{o(!1),d(E),f(!0),n(!0)},M=[{title:"Total Events",value:i,icon:K,color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-500/10",iconColor:"text-blue-500"},{title:"Upcoming",value:e,icon:$e,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10",iconColor:"text-purple-500"},{title:"Ongoing",value:t,icon:et,color:"from-orange-500 to-red-500",bgColor:"bg-orange-500/10",iconColor:"text-orange-500"},{title:"Completed",value:s,icon:ze,color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10",iconColor:"text-green-500"}];return u.jsxs(ge,{header:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg blur-xl opacity-50 animate-pulse"}),u.jsx(K,{className:"relative h-10 w-10 text-blue-600"})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Event Management"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and organize all your events"})]})]}),u.jsxs(qe,{onClick:()=>{d(null),f(!1),g(null),n(!0)},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[u.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),children:[u.jsx(de,{title:"Event Management"}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map((E,w)=>u.jsxs(B,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-2xl transition-all duration-300 group",children:[u.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${E.color} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),u.jsxs($,{className:"flex flex-row items-center justify-between pb-2",children:[u.jsx(Q,{className:"text-sm font-medium text-gray-600",children:E.title}),u.jsx("div",{className:`p-2 rounded-lg ${E.bgColor}`,children:u.jsx(E.icon,{className:`h-5 w-5 ${E.iconColor}`})})]}),u.jsx(Z,{children:u.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:E.value})})]},w))}),u.jsxs(B,{className:"border-0 shadow-2xl overflow-hidden",children:[u.jsx($,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ze,{className:"h-6 w-6"}),u.jsxs("div",{children:[u.jsx(Q,{className:"text-2xl",children:"Event Calendar"}),u.jsx(Fe,{className:"text-blue-100",children:"Click on any date to create an event, drag to reschedule"})]})]})})}),u.jsx(Z,{className:"p-6",children:u.jsx("div",{className:"fullcalendar-wrapper",children:u.jsx(Oe,{ref:p,plugins:[ke,_e,yt,We],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},events:h,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,dateClick:v,eventClick:C,eventDrop:x,height:"auto",timeZone:"Asia/Dhaka",eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short",hour12:!0},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short",hour12:!0},eventClassNames:"cursor-pointer hover:opacity-80 transition-opacity"})})})]})]}),l&&u.jsx(Ge,{isOpen:l,onClose:()=>{n(!1),g(null),d(null),f(!1)},initialDate:c,event:a,isEditMode:m}),r&&a&&u.jsx(Be,{isOpen:r,onClose:()=>{o(!1),d(null)},event:a,onEdit:D})]})}export{di as default};
