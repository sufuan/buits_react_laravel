import{r,J as K,j as s,Q as R,t as j,S as W}from"./app-CYR8_A6n.js";import{A as Y}from"./AdminAuthenticatedLayout-CTe1OmT7.js";import{E as Z}from"./ExcelImportButton-DZDQOu6s.js";import{B as i}from"./button-DApKdSMh.js";import{C as g,a as b,b as C,d as f,c as $}from"./card-XqDTxpKX.js";import{B as N}from"./badge-B-fTs8Av.js";import{A as ss,a as es,b as as}from"./avatar-Dp9IZtzi.js";import{I as ts}from"./input-DuHn3Mx5.js";import{S,a as k,b as A,c as F,d as h}from"./select-Dbmz7lev.js";import{S as w}from"./breadcrumb-CoIzsEt5.js";import{D as rs,b as ls,c as ns,d as ms,f as is}from"./dialog-Drskh3pe.js";import{A as D,b as I,a as _}from"./alert-C4rpyqSV.js";import{C as U}from"./circle-check-big-D-oSvNkr.js";import{C as cs}from"./circle-x-99_6idAT.js";import{C as ds}from"./circle-alert-_1E_HZ7F.js";import{F as os}from"./funnel-x466QVqa.js";import{S as xs}from"./search-HB1IwfTy.js";import{U as hs}from"./index-BsODw5XB.js";import{M as ps}from"./mail-8_qhiXgd.js";import{I as js}from"./id-card-DPjZA4jE.js";import{E as gs}from"./eye-CT6NJ6bn.js";import{S as fs}from"./square-pen-CN6ydFOz.js";import{P as Ns}from"./phone-DUVLDNGL.js";import{G as ws}from"./graduation-cap-DWVtZX0R.js";import{C as us}from"./calendar-ByQlL5X-.js";import{M as E}from"./map-pin-b9sG5w8M.js";import{F as vs}from"./file-spreadsheet-D3CDdsb7.js";import{D as ys}from"./download-CFFWCBMy.js";import{U as bs}from"./user-plus-CaE18xTN.js";import"./index-DGq-kHDD.js";import"./index-B7R5Yj8X.js";import"./index-BYA3paII.js";import"./clsx-B-dksMZM.js";import"./index-CGNTSBfd.js";import"./chevron-right-BhHhgun0.js";import"./createLucideIcon-BAJcpCsp.js";import"./award-DbQqVMFm.js";import"./index-3hBDnU-Q.js";import"./upload-CHWtOP4I.js";import"./index-BdQq_4o_.js";import"./index-CxNRSp3h.js";import"./index-CnRWoKZx.js";import"./index-DeNuz5rL.js";function pe({users:o}){const[n,T]=r.useState(""),[c,M]=r.useState("all"),[d,L]=r.useState("all"),[Cs,B]=r.useState(!1),[P,x]=r.useState(!1),[t,u]=r.useState(null),[v,V]=r.useState(null);r.useEffect(()=>{z()},[]);const z=async()=>{try{const m=await(await fetch(route("admin.users.import.validation-metadata"))).json();m.success&&V(m.data)}catch(e){console.error("Failed to load validation metadata:",e)}},{flash:a,errors:l}=K().props,G=[...new Set(o.map(e=>e.department))].sort(),H=[...new Set(o.map(e=>e.session))].sort();r.useEffect(()=>{(a!=null&&a.success||a!=null&&a.error||l!=null&&l.error)&&(u({success:(a==null?void 0:a.success)||null,error:(a==null?void 0:a.error)||(l==null?void 0:l.error)||null}),x(!0),B(!1))},[a,l]);const p=o.filter(e=>{var y;const m=e.name.toLowerCase().includes(n.toLowerCase())||e.email.toLowerCase().includes(n.toLowerCase())||((y=e.member_id)==null?void 0:y.toLowerCase().includes(n.toLowerCase())),O=c==="all"||e.department===c,X=d==="all"||e.session===d;return m&&O&&X}),J=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=()=>{window.location.href=route("admin.users.export")},q=()=>{window.location.href=route("admin.users.template")};return s.jsxs(Y,{header:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0",children:[s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"All Users"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[s.jsxs(i,{onClick:q,variant:"outline",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Template"})]}),s.jsxs(i,{onClick:Q,variant:"outline",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),v&&s.jsx(Z,{validationMetadata:v,onImportComplete:e=>{u(e),x(!0),W.reload()}}),s.jsx(j,{href:route("admin.users.create"),children:s.jsxs(i,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(bs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Add User"}),s.jsx("span",{className:"sm:hidden",children:"Add"})]})}),s.jsxs(N,{variant:"secondary",className:"text-xs flex-shrink-0",children:[p.length,"/",o.length]})]})]}),children:[s.jsx(R,{title:"All Users"}),s.jsx(rs,{open:P,onOpenChange:x,children:s.jsxs(ls,{className:"sm:max-w-md",children:[s.jsx(ns,{children:s.jsx(ms,{className:"flex items-center gap-2",children:t!=null&&t.success?s.jsxs(s.Fragment,{children:[s.jsx(U,{className:"h-5 w-5 text-green-500"}),"Import Successful"]}):s.jsxs(s.Fragment,{children:[s.jsx(cs,{className:"h-5 w-5 text-red-500"}),"Import Failed"]})})}),s.jsxs("div",{className:"py-4",children:[(t==null?void 0:t.success)&&s.jsxs(D,{className:"border-green-200 bg-green-50",children:[s.jsx(U,{className:"h-4 w-4 text-green-600"}),s.jsx(I,{className:"text-green-800",children:"Success"}),s.jsx(_,{className:"text-green-700",children:t.success})]}),(t==null?void 0:t.error)&&s.jsxs(D,{className:"border-red-200 bg-red-50",children:[s.jsx(ds,{className:"h-4 w-4 text-red-600"}),s.jsx(I,{className:"text-red-800",children:"Error"}),s.jsx(_,{className:"text-red-700",children:t.error})]})]}),s.jsx(is,{children:s.jsx(i,{onClick:()=>x(!1),children:"Close"})})]})}),s.jsx("div",{className:"py-4 sm:py-8 lg:py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8",children:[s.jsxs(g,{className:"mb-4 sm:mb-6",children:[s.jsx(b,{className:"pb-3 sm:pb-6",children:s.jsxs(C,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(os,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filters"]})}),s.jsx(f,{className:"pt-0",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(xs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(ts,{placeholder:"Search by name, email, or member ID...",value:n,onChange:e=>T(e.target.value),className:"pl-10"})]}),s.jsxs(S,{value:c,onValueChange:M,children:[s.jsx(k,{children:s.jsx(A,{placeholder:"Filter by department"})}),s.jsxs(F,{children:[s.jsx(h,{value:"all",children:"All Departments"}),G.map(e=>s.jsx(h,{value:e,children:e},e))]})]}),s.jsxs(S,{value:d,onValueChange:L,children:[s.jsx(k,{children:s.jsx(A,{placeholder:"Filter by session"})}),s.jsxs(F,{children:[s.jsx(h,{value:"all",children:"All Sessions"}),H.map(e=>s.jsx(h,{value:e,children:e},e))]})]})]})})]}),p.length===0?s.jsx(g,{children:s.jsxs(f,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(hs,{className:"h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n||c!=="all"||d!=="all"?"No users found":"No users yet"}),s.jsx("p",{className:"text-gray-500 text-center",children:n||c!=="all"||d!=="all"?"Try adjusting your search criteria.":"Users will appear here once they are approved."})]})}):s.jsx("div",{className:"grid gap-3 sm:gap-4 lg:gap-6",children:p.map(e=>s.jsxs(g,{className:"overflow-hidden",children:[s.jsxs(b,{className:"pb-3 sm:pb-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-0",children:[s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 w-full",children:[s.jsxs(ss,{className:"h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0",children:[s.jsx(es,{src:e.image,alt:e.name}),s.jsx(as,{className:"text-xs sm:text-sm",children:e.name.split(" ").map(m=>m[0]).join("").toUpperCase()})]}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(C,{className:"text-base sm:text-lg truncate",children:e.name}),s.jsxs($,{className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(ps,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.email})]}),e.member_id&&s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(js,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-mono text-blue-600 truncate",children:e.member_id})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 w-full sm:w-auto justify-end",children:[s.jsx(j,{href:route("admin.users.show",e.id),children:s.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(gs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),s.jsx(j,{href:route("admin.users.edit",e.id),children:s.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(fs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[s.jsxs(N,{variant:"outline",className:"text-xs",children:["Joined ",J(e.created_at)]}),s.jsx(N,{variant:"secondary",className:"text-xs",children:e.usertype||"User"})]})]}),s.jsxs(f,{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 text-xs sm:text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.department})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-500 flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Session: ",e.session]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0",children:"Roll:"}),s.jsx("span",{className:"truncate",children:e.class_roll})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0",children:"Gender:"}),s.jsx("span",{className:"capitalize truncate",children:e.gender})]}),e.blood_group&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-500 flex-shrink-0",children:"Blood:"}),s.jsx("span",{className:"truncate",children:e.blood_group})]})]}),e.skills&&s.jsxs(s.Fragment,{children:[s.jsx(w,{}),s.jsxs("div",{className:"text-xs sm:text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Skills:"}),s.jsx("p",{className:"text-gray-600 mt-1 break-words",children:e.skills})]})]}),(e.current_address||e.permanent_address)&&s.jsxs(s.Fragment,{children:[s.jsx(w,{}),s.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[e.current_address&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(E,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"font-medium",children:"Current Address:"}),s.jsx("p",{className:"text-gray-600 break-words",children:e.current_address})]})]}),e.permanent_address&&e.permanent_address!==e.current_address&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(E,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"font-medium",children:"Permanent Address:"}),s.jsx("p",{className:"text-gray-600 break-words",children:e.permanent_address})]})]})]})]}),e.transaction_id&&s.jsxs(s.Fragment,{children:[s.jsx(w,{}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[s.jsx("span",{className:"font-medium",children:"Transaction ID:"}),s.jsx("span",{className:"break-all ml-1",children:e.transaction_id})]})]})]})]},e.id))})]})})]})}export{pe as default};
