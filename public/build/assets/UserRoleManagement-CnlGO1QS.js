import{J as G,r as c,S as v,j as e,Q as K}from"./app-CYR8_A6n.js";import{A as X,C as Y}from"./AdminAuthenticatedLayout-CTe1OmT7.js";import{C as d,a as x,b as m,d as h,c as U}from"./card-XqDTxpKX.js";import{I as Z}from"./input-DuHn3Mx5.js";import{B as o}from"./button-DApKdSMh.js";import{B as ee}from"./badge-B-fTs8Av.js";import{A as se,a as ae,b as ne}from"./avatar-Dp9IZtzi.js";import{T as te,a as ie,b as k,c as j,d as le,e as u}from"./table-CtJjXJau.js";import{S as y,a as D,b as E,c as _,d as p}from"./select-Dbmz7lev.js";import{D as re,b as oe,c as ce,d as de,e as xe,f as me}from"./dialog-Drskh3pe.js";import{L as F}from"./label-Bxegxtut.js";import{T as he}from"./textarea-BsbcLBLb.js";import{U as pe}from"./user-cog-CB9W3yrM.js";import{U as je}from"./index-BsODw5XB.js";import{A as ue}from"./activity-Dbue9RzZ.js";import{S as ge}from"./search-HB1IwfTy.js";import{F as V}from"./file-text-CbLqUZsf.js";import{D as z}from"./download-CFFWCBMy.js";import{S as fe}from"./square-pen-CN6ydFOz.js";import"./index-DGq-kHDD.js";import"./index-B7R5Yj8X.js";import"./index-BYA3paII.js";import"./clsx-B-dksMZM.js";import"./index-CGNTSBfd.js";import"./breadcrumb-CoIzsEt5.js";import"./createLucideIcon-BAJcpCsp.js";import"./index-CnRWoKZx.js";import"./index-CxNRSp3h.js";import"./chevron-right-BhHhgun0.js";import"./calendar-ByQlL5X-.js";import"./award-DbQqVMFm.js";import"./index-3hBDnU-Q.js";import"./index-BdQq_4o_.js";import"./index-DeNuz5rL.js";function Ze(){const{users:l,designations:R,filters:N,userTypes:I,statistics:t}=G().props,[r,L]=c.useState(N.search||""),[a,M]=c.useState(N.usertype||"all"),[n,P]=c.useState(N.designation_id||"all"),[g,T]=c.useState(null),[w,b]=c.useState(""),[C,S]=c.useState(""),[B,f]=c.useState(!1);c.useEffect(()=>{const s={};r&&(s.search=r),a&&a!=="all"&&(s.usertype=a),n&&n!=="all"&&(s.designation_id=n),v.get(route("admin.user-role-management.index"),s,{preserveState:!0,preserveScroll:!0})},[r,a,n]);const H=s=>{if(s.preventDefault(),!w||!C.trim()){alert("Please select a designation and provide a reason for the change.");return}v.put(route("admin.user-role-management.update-role",g.id),{designation_id:w,reason:C},{onSuccess:()=>{f(!1),T(null),b(""),S("")},onError:i=>{console.error("Error updating designation:",i)}})},A=s=>{const i=new URLSearchParams;r&&i.append("search",r),a&&i.append("usertype",a),n&&i.append("designation_id",n);const J=s==="excel"?route("admin.user-role-management.export.excel"):route("admin.user-role-management.export.csv");window.location.href=`${J}?${i.toString()}`},O=s=>{var i;T(s),b(((i=s.designation)==null?void 0:i.id)||""),S(""),f(!0)},q=s=>s.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2),Q=s=>{switch(s){case"Executive":return"default";case"Volunteer":return"secondary";case"Member":return"outline";default:return"outline"}},W=()=>{const s=new URLSearchParams;r&&s.append("search",r),a&&a!=="all"&&s.append("usertype",a),n&&n!=="all"&&s.append("designation_id",n),window.location.href=route("admin.user-role-management.export-csv")+"?"+s.toString()},$=()=>{const s=new URLSearchParams;r&&s.append("search",r),a&&a!=="all"&&s.append("usertype",a),n&&n!=="all"&&s.append("designation_id",n),window.location.href=route("admin.user-role-management.export-excel")+"?"+s.toString()};return e.jsxs(X,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Executive Role Management"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:W,variant:"outline",size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(o,{onClick:$,variant:"outline",size:"sm",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),children:[e.jsx(K,{title:"Executive Role Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Executive Role Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage executive designations and roles within the organization"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Executives"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.total_executives)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Executive members"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"With Designations"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.with_designations)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned positions"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Without Designations"}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.without_designations)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending assignment"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Recent Changes"}),e.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.recent_changes)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(m,{children:"Filters & Actions"}),e.jsx(U,{children:"Filter users and export data"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-y-0 lg:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{placeholder:"Search by name, email, or student ID...",value:r,onChange:s=>L(s.target.value),className:"pl-8"})]})}),e.jsxs(y,{value:a,onValueChange:M,children:[e.jsx(D,{className:"w-full lg:w-[180px]",children:e.jsx(E,{placeholder:"Filter by role"})}),e.jsxs(_,{children:[e.jsx(p,{value:"all",children:"All Roles"}),I.map(s=>e.jsx(p,{value:s,children:s},s))]})]}),e.jsxs(y,{value:n,onValueChange:P,children:[e.jsx(D,{className:"w-full lg:w-[180px]",children:e.jsx(E,{placeholder:"Filter by designation"})}),e.jsxs(_,{children:[e.jsx(p,{value:"all",children:"All Designations"}),R.map(s=>e.jsx(p,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>A("csv"),className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"CSV"})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>A("excel"),className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Excel"})]})]})]})})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsxs(m,{children:["Users (",l.total,")"]}),e.jsx(U,{children:"Manage user roles and designations"})]}),e.jsxs(h,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(k,{children:[e.jsx(j,{children:"User"}),e.jsx(j,{children:"Contact"}),e.jsx(j,{children:"Role"}),e.jsx(j,{children:"Designation"}),e.jsx(j,{children:"Actions"})]})}),e.jsx(le,{children:l.data.map(s=>e.jsxs(k,{children:[e.jsx(u,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(se,{className:"h-8 w-8",children:[e.jsx(ae,{src:s.avatar,alt:s.name}),e.jsx(ne,{children:q(s.name)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",s.member_id||"N/A"]})]})]})}),e.jsx(u,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.phone||"No phone"})]})}),e.jsx(u,{children:e.jsx(ee,{variant:Q(s.usertype),children:s.usertype||"No Role"})}),e.jsx(u,{children:e.jsx("span",{className:"text-sm",children:s.designation?s.designation.name:"No Designation"})}),e.jsx(u,{children:e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>O(s),className:"flex items-center space-x-1",children:[e.jsx(fe,{className:"h-3 w-3"}),e.jsx("span",{children:"Change"})]})})]},s.id))})]}),l.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l.from," to ",l.to," of ",l.total," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[l.prev_page_url&&e.jsx(o,{variant:"outline",size:"sm",onClick:()=>v.get(l.prev_page_url),children:"Previous"}),l.next_page_url&&e.jsx(o,{variant:"outline",size:"sm",onClick:()=>v.get(l.next_page_url),children:"Next"})]})]})]})]}),e.jsx(re,{open:B,onOpenChange:f,children:e.jsxs(oe,{className:"sm:max-w-[425px]",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Change User Designation"}),e.jsxs(xe,{children:["Update the designation for ",g==null?void 0:g.name,". This action will be logged for audit purposes."]})]}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"designation",children:"New Designation"}),e.jsxs(y,{value:w,onValueChange:b,children:[e.jsx(D,{children:e.jsx(E,{placeholder:"Select designation"})}),e.jsxs(_,{children:[e.jsx(p,{value:"none",children:"No Designation"}),R.map(s=>e.jsx(p,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"reason",children:"Reason for Change"}),e.jsx(he,{id:"reason",placeholder:"Enter the reason for this designation change...",value:C,onChange:s=>S(s.target.value),required:!0})]})]}),e.jsxs(me,{children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(o,{type:"submit",children:"Update Designation"})]})]})]})})]})]})}export{Ze as default};
