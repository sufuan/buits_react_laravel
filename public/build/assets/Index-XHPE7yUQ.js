import{r as h,x as N,j as e,Q as G,S as J}from"./app-B2X1XaNm.js";import{A as K,S}from"./AdminAuthenticatedLayout-DmT34SZ2.js";import{B as l}from"./button-P6T1_vgc.js";import{C as W,a as X,b as Y,c as Z,d as ee}from"./card-D0yoLS0z.js";import{T as se,a as ae,b as U,c as o,d as ne,e as m}from"./table-xKWce6MW.js";import{D as C,a as ie,b,c as y,d as A,e as E,f as D}from"./dialog-DlEMAR53.js";import{I as w}from"./input-CyZ6UkXs.js";import{L as r}from"./label-C2vcgzi5.js";import{B as F}from"./badge-DQBy8s_m.js";import{S as x,a as j,b as u,c as p,d as c}from"./select-DWhZBClm.js";import{t as g}from"./index-pGmX7T_0.js";import{P as te}from"./plus-COTUrCho.js";import{U as le}from"./user-cog-D2Q-_li7.js";import{S as re}from"./square-pen-Ccla5iKE.js";import{T as de}from"./trash-2-GBhnKHdW.js";import"./index-OFpzrNI9.js";import"./createLucideIcon-MQLet3rE.js";import"./index-CmZkezez.js";import"./clsx-B-dksMZM.js";import"./index-DT6XUJuj.js";import"./index-xyJr9NLp.js";import"./index-Cy2A0VGf.js";import"./breadcrumb-BMrtP8Y-.js";import"./index-D5LfO9Z3.js";import"./index-BoljUbX9.js";import"./chevron-right-SzdI6zVD.js";import"./avatar-ByM5K8x2.js";import"./calendar-CzTV-1KN.js";import"./award-esGGQCAZ.js";import"./index-BdQq_4o_.js";import"./index-BGkcqJUm.js";function ze({admins:B,roles:R,users:V}){var O;const[H,T]=h.useState(!1),[_,v]=h.useState(!1),[k,f]=h.useState(!1),[n,I]=h.useState(null),i=N({user_id:"",role:""}),a=N({name:"",username:"",email:"",status:"active"}),d=N({role:""}),z=s=>{s.preventDefault(),i.post(route("admin.admin-management.store"),{onSuccess:()=>{T(!1),i.reset(),g.success("Admin created successfully!")}})},L=s=>{I(s),a.setData({name:s.name,username:s.username,email:s.email,status:s.status}),v(!0)},P=s=>{s.preventDefault(),a.put(route("admin.admin-management.update",n.id),{onSuccess:()=>{v(!1),a.reset(),g.success("Admin updated successfully!")}})},Q=s=>{var t;I(s),d.setData("role",((t=s.roles[0])==null?void 0:t.name)||""),f(!0)},q=s=>{s.preventDefault(),d.put(route("admin.admin-management.assign-role",n.id),{onSuccess:()=>{f(!1),d.reset(),g.success("Role assigned successfully!")}})},M=s=>{confirm(`Are you sure you want to delete admin "${s.name}"?`)&&J.delete(route("admin.admin-management.destroy",s.id),{onSuccess:()=>g.success("Admin deleted successfully!")})},$=s=>{const t={active:"default",inactive:"secondary",suspended:"destructive"};return e.jsx(F,{variant:t[s],children:s})};return e.jsxs(K,{children:[e.jsx(G,{title:"Admin Management"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Role Assignment"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Select existing users and assign them admin roles"})]}),e.jsxs(C,{open:H,onOpenChange:T,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(l,{className:"bg-red-600 hover:bg-red-700",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Assign User as Admin"]})}),e.jsx(b,{className:"max-w-md",children:e.jsxs("form",{onSubmit:z,children:[e.jsxs(y,{children:[e.jsx(A,{children:"Assign User as Admin"}),e.jsx(E,{children:"Select an existing user and assign them an admin role"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"user",children:"Select User"}),e.jsxs(x,{value:i.data.user_id,onValueChange:s=>i.setData("user_id",s),children:[e.jsx(j,{children:e.jsx(u,{placeholder:"Choose a user"})}),e.jsx(p,{children:V.map(s=>e.jsx(c,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.email," • ",s.member_id||"No ID"," • ",s.department]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"role",children:"Assign Role"}),e.jsxs(x,{value:i.data.role,onValueChange:s=>i.setData("role",s),children:[e.jsx(j,{children:e.jsx(u,{placeholder:"Select role"})}),e.jsx(p,{children:R.map(s=>e.jsx(c,{value:s.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),s.name]})},s.id))})]})]})]}),e.jsx(D,{children:e.jsx(l,{type:"submit",disabled:i.processing,children:"Assign as Admin"})})]})})]})]}),e.jsxs(W,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:"All Admins"}),e.jsx(Z,{children:"Assign roles to admins - each admin can have one role with specific permissions"})]}),e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(U,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Email"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Status"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(ne,{children:B.map(s=>{var t;return e.jsxs(U,{children:[e.jsx(m,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-red-600"}),e.jsxs("div",{children:[e.jsx("div",{children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["@",s.username]})]})]})}),e.jsx(m,{children:s.email}),e.jsx(m,{children:e.jsx(F,{variant:"outline",children:((t=s.roles[0])==null?void 0:t.name)||"No role"})}),e.jsx(m,{children:$(s.status)}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(l,{variant:"default",size:"sm",onClick:()=>Q(s),className:"bg-red-600 hover:bg-red-700",children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Assign Role"]}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>L(s),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>M(s),children:e.jsx(de,{className:"h-4 w-4"})})]})})]},s.id)})})]})})]}),e.jsx(C,{open:_,onOpenChange:v,children:e.jsx(b,{className:"max-w-md",children:e.jsxs("form",{onSubmit:P,children:[e.jsx(y,{children:e.jsx(A,{children:"Edit Admin"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(w,{value:a.data.name,onChange:s=>a.setData("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Username"}),e.jsx(w,{value:a.data.username,onChange:s=>a.setData("username",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Email"}),e.jsx(w,{value:a.data.email,onChange:s=>a.setData("email",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(x,{value:a.data.status,onValueChange:s=>a.setData("status",s),children:[e.jsx(j,{children:e.jsx(u,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"active",children:"Active"}),e.jsx(c,{value:"inactive",children:"Inactive"}),e.jsx(c,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsx(D,{children:e.jsx(l,{type:"submit",disabled:a.processing,children:"Update"})})]})})}),e.jsx(C,{open:k,onOpenChange:f,children:e.jsx(b,{className:"max-w-md",children:e.jsxs("form",{onSubmit:q,children:[e.jsxs(y,{children:[e.jsxs(A,{children:["Assign Role to ",n==null?void 0:n.name]}),e.jsx(E,{children:"Select a role to assign to this admin. The role determines what permissions they have."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"role",children:"Select Role"}),e.jsxs(x,{value:d.data.role,onValueChange:s=>d.setData("role",s),children:[e.jsx(j,{id:"role",children:e.jsx(u,{placeholder:"Choose a role..."})}),e.jsx(p,{children:R.map(s=>e.jsx(c,{value:s.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.name})]})},s.id))})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Current role: ",e.jsx("span",{className:"font-medium",children:((O=n==null?void 0:n.roles[0])==null?void 0:O.name)||"None"})]})]})}),e.jsx(D,{children:e.jsx(l,{type:"submit",disabled:d.processing,className:"bg-red-600 hover:bg-red-700",children:"Assign Role"})})]})})})]})]})}export{ze as default};
